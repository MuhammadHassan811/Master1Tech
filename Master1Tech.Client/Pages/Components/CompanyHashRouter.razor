@inject IJSRuntime JSRuntime
@inject NavigationManager Navigation
@using Master1Tech.Models

<div class="company-tabs-section">
    <div class="container">
        <div class="row justify-content-md-center">
            <section class="company-tabs-section">
                <div class="container">
                    <div class="row justify-content-md-center">
                        <div class="col-md-9">
                            <ul class="nav nav-tabs light-card" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="locations-tab" data-bs-toggle="tab" data-bs-target="#locations-tab-pane" type="button" role="tab" aria-controls="locations-tab-pane" aria-selected="true">Locations</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="speciality-tab" data-bs-toggle="tab" data-bs-target="#speciality-tab-pane" type="button" role="tab" aria-controls="speciality-tab-pane" aria-selected="false">Speciality</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats-tab-pane" type="button" role="tab" aria-controls="stats-tab-pane" aria-selected="false">Stats</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="portfolio-tab" data-bs-toggle="tab" data-bs-target="#portfolio-tab-pane" type="button" role="tab" aria-controls="portfolio-tab-pane" aria-selected="false">Portfolio</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews-tab-pane" type="button" role="tab" aria-controls="reviews-tab-pane" aria-selected="false">Reviews</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="quote-tab" data-bs-toggle="tab" data-bs-target="#quote-tab-pane" type="button" role="tab" aria-controls="quote-tab-pane" aria-selected="false">Get a Quote</button>
                                </li>

                            </ul>
                            <div class="tab-content mt-4" id="myTabContent">
                                <div class="tab-pane fade show active" id="locations-tab-pane" role="tabpanel" aria-labelledby="locations-tab" tabindex="0">
                                    <!-- Locations Section -->
                                    <div id="locations" class="" data-section="locations">
                                        <div class="card light-background">
                                            <div class="card-body">
                                                <div data-step="0" class="company-location d-flex gap-3">
                                                    <div class="inner-address p-4 h-100 bg-white">
                                                        <div class="inner">
                                                            <p class="loc-title">HEADQUARTERS</p> 
                                                            <p>
                                                                <span itemprop="streetAddress">144/2, Block B, Bankers Society Near DHA Phase 4</span>
                                                                <br> 
                                                                <span itemprop="addressLocality">Lahore</span>
                                                                <span itemprop="postalCode">54792</span>
                                                                <br> 
                                                                <span itemprop="addressCountry">Pakistan</span> 
                                                                <span itemprop="telephone" class="hidden">+924237888403</span>
                                                            </p>
                                                        </div>
                                                    </div> 
                                                    <div class="map-canvas"><!----> 
                                                        <div class="map-canvas__ifr" style="">
                                                            <div class="mapouter">
                                                                <div class="gmap_canvas">
                                                                    <iframe width="600" height="500" id="gmap_canvas" src="https://maps.google.com/maps?q=pakistan&t=&z=9&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="tab-pane fade" id="speciality-tab-pane" role="tabpanel" aria-labelledby="speciality-tab" tabindex="0">
                                    <!-- Speciality Section -->
                                    <div id="speciality" class="" data-section="speciality">

                                        <div class="card light-background">
                                            <div class="card-body">
                                                <div class="box--item bg-white services-box">
                                                    <div class="itm--title font-medium">Service Speciality List</div>
                                                    <div class="itm--body">
                                                        <ul class="cleanlist services-list">
                                                            @if (Company.CompanyServices.Count > 0)
                                                            {
                                                                foreach (var item in Company.CompanyServices)
                                                                {
                                                                    <li>
                                                                        <a href="#" class="">
                                                                            <span class="txt">@item.Service.Name</span>
                                                                        </a>
                                                                    </li>
                                                                }

                                                            }
                                                        </ul>
                                                    </div>
                                               </div>
                                                <div class="box--item bg-white services-box mt-4">
                                                    <div class="itm--title font-medium">Industry Focus</div>
                                                    <div class="itm--body">
                                                        <ul class="cleanlist services-list">
                                                            @if (Company.CompanyIndustryFocus.Count > 0)
                                                            {
                                                                foreach (var item in Company.CompanyIndustryFocus)
                                                                {
                                                                    <li>
                                                                        <div class="d-flex gap-4 flex-row">
                                                                            <span class="name align-self-center flex-grow-3 w-25">@item.Industry.Name</span>
                                                                            <div class="flex-fill">
                                                                                <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                                                                                    <div class="progress-bar" style="width: @item.FocusPercentage%">  @item.FocusPercentage %</div>
                                                                                </div>
                                                                               
                                                                            </div>
                                                                            
                                                                        </div>
                                                                    </li>
                                                                }

                                                            }
                                                        </ul>
                                                    </div>
                                                </div>
                                                 
                                            </div>
                                        </div>


                                    </div>

                                </div>
                                
                                <div class="tab-pane fade" id="stats-tab-pane" role="tabpanel" aria-labelledby="stats-tab" tabindex="0">

                                    <div class="card light-background">
                                        <div class="card-body">
                                        </div>
                                    </div>

                                </div>
                                
                                <div class="tab-pane fade" id="portfolio-tab-pane" role="tabpanel" aria-labelledby="portfolio-tab" tabindex="0">
                                    <!-- Portfolio Section -->
                                    <div id="portfolio" class="" data-section="portfolio">

                                        <div class="card light-background">
                                            <div class="card-body">

                                                <h2>Portfolio</h2>
                                                <div class="section-content">
                                                    <p>Explore our diverse portfolio of successful projects and case studies.</p>
                                                    <div class="portfolio-grid">
                                                        <div class="portfolio-item">E-commerce Platform</div>
                                                        <div class="portfolio-item">Mobile Banking App</div>
                                                        <div class="portfolio-item">Healthcare Dashboard</div>
                                                        <div class="portfolio-item">Social Media Platform</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                                
                                <div class="tab-pane fade" id="reviews-tab-pane" role="tabpanel" aria-labelledby="reviews-tab" tabindex="0">

                                    <!-- Reviews Section -->
                                    <div id="reviews" class="" data-section="reviews">

                                        <div class="card light-background">
                                            <div class="card-body">
                                                <h2>Reviews</h2>
                                                <div class="section-content">
                                                    <div class="review-item">
                                                        <div class="review-rating">⭐⭐⭐⭐⭐</div>
                                                        <div class="review-text">"Excellent service and outstanding results. Highly recommended!"</div>
                                                        <div class="review-author">- John Smith, CEO</div>
                                                    </div>
                                                    <div class="review-item">
                                                        <div class="review-rating">⭐⭐⭐⭐⭐</div>
                                                        <div class="review-text">"Professional team with great communication throughout the project."</div>
                                                        <div class="review-author">- Sarah Johnson, CTO</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        
                                    </div>

                                </div>
                                
                                <div class="tab-pane fade" id="quote-tab-pane" role="tabpanel" aria-labelledby="quote-tab" tabindex="0">
                                    <!-- Get a Quote Section -->
                                   <Master1Tech.Client.Pages.Company.ContactPage />
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>


<style>
    
</style>

@code {

    [Parameter, EditorRequired]
    public Company Company { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("initializeScrollSpy");

            // Handle initial hash navigation
            var uri = Navigation.Uri;
            if (uri.Contains('#'))
            {
                var hash = uri.Split('#').Last();
                await ScrollToElement(hash);
            }
        }
    }

    private async Task ScrollToSection(string sectionId)
    {
        // Just scroll to element without updating URL
        await ScrollToElement(sectionId);
    }

    private async Task ScrollToElement(string elementId)
    {
        await JSRuntime.InvokeVoidAsync("scrollToElement", elementId);
    }
}