@page "/companyprofile/{id}"
@using Master1Tech.Models
@using Master1Tech.Services
@inject ICompanyService CompanyService

@if (company != null)
{
    string logoUrl = $"company/{company.Slug}.png";
    <section class="light-background">
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="col-12  col-md-12 col-lg-9">
                    <div class="card">
                        <div class="card-body p-4">
                            <div class="d-flex gap-3 align-items-center">
                                <figure class="company-img figure">
                                    <a href="@($"/companyprofile/{company.Slug}")" target="_self" title="@company.Name" aria-label="@company.Name">
                                        <picture class="s-imag loaded">
                                            <img src="@(string.IsNullOrEmpty(logoUrl) ? "https://img.freepik.com/free-vector/illustration-gallery-icon_53876-27002.jpg" : logoUrl)" alt="@company.LogoText" height="110" width="110" />
                                        </picture>
                                    </a>
                                </figure>
                                <div class="company-info d-flex flex-column gap-1">
                                    <a href="@($"/companyprofile/{company.Slug}")" aria-label="@company.Name Company Profile Page" target="_self" class="d-flex gap-2">
                                        @company.Name
                                        @if (company.IsVerified)
                                        {
                                            <i class="bi bi-patch-check-fill txt-blue"></i>
                                        }
                                    </a>
                                    @if (!string.IsNullOrEmpty(company.Location))
                                    {
                                        <p>
                                            <span class="text-muted"><i class="bi bi-geo-alt txt-blue"></i> @company.Location</span>
                                        </p>
                                    }
                                    @if (!string.IsNullOrEmpty(company.Headquarter))
                                    {
                                        <p>
                                            <span class="text-muted"><i class="bi bi-building txt-blue"></i> @company.Headquarter</span>
                                        </p>
                                    }

                                </div>
                            </div>

                            <hr>


                            <!-- Info Bar Section -->
                            <div class="info-bar d-flex gap-4 py-3 px-5 justify-content-between">
                                <div class="d-flex gap-3 align-items-center flex-row">
                                    <span class="info-label">Founding Year</span>
                                    <span class="info-value txt-blue">@company.FoundedYear</span> <!-- Kept separate as not in Company model -->
                                </div>
                                <div class="d-flex gap-3 align-items-center flex-row">
                                    <span class="info-label">Team Size</span>
                                    <span class="info-value txt-blue">@company.TeamSize</span>
                                </div>
                                <div class="d-flex gap-3 align-items-center flex-row">
                                    <span class="info-label">Hourly Rate</span>
                                    <span class="info-value txt-blue">@company.HourlyRate</span>
                                </div>
                            </div>


                            <p class="company-description" style="line-height:1.5">@company.Description</p>

                            @if (company.FirstAnswerQuestions.Count > 0)
                            {
                                <h5 class="mb-3">@company.Name at a Glance</h5>

                                <div class="accordion" id="accordionExample">
                               
                                    @foreach (var item in company.FirstAnswerQuestions)
                                    {
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@item.Id" aria-expanded="false" aria-controls="collapse-@item.Id">
                                                    @item.Question
                                                </button>
                                            </h2>
                                            <div id="collapse-@item.Id" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
                                                    @item.Answer
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>

                            }
                            
                        </div>
                    </div>
                </div>
            </div>
           
            <!-- CompanyProfile.razor -->
            <div class="company-profile-container">
                <!-- Header Section -->
                 
                <!-- Main Content Section -->
                <div class="main-content">
                    
                    @* <h3 class="section-title">We Are Specialized in:</h3>
                    <ul class="specializations-list">
                        @foreach (var service in CompanyData.Services)
                        {
                            <li>@service</li>
                        }
                    </ul> *@

                                @*  <h3 class="section-title">What Makes Us Your Trusted Development Partner?</h3>
                    <div class="partner-benefits">
                        @foreach (var benefit in PartnerBenefits)
                        {
                            <div class="benefit-item">
                                <h4 class="benefit-title">@benefit.Title</h4>
                                <p class="benefit-description">@benefit.Description</p>
                            </div>
                        }
                    </div>

                    <div class="call-to-action">
                        <p>@CallToActionText</p>
                    </div>

                    <h3 class="section-title">@AccordionTitle</h3>
                    <div class="accordion-container">
                        @foreach (var item in AccordionItems)
                        {
                            <div class="accordion-item">
                                <button class="accordion-header" @onclick="() => ToggleAccordion(item)">
                                    @item.Question
                                    <span class="accordion-icon">@(item.IsExpanded ? "-" : "+")</span>
                                </button>
                                @if (item.IsExpanded)
                                {
                                    <div class="accordion-content">
                                        <p>@item.Answer</p>
                                    </div>
                                }
                            </div>
                        }
                    </div> *@
                </div>@* 
    <CompanyTabDetails /> *@
            </div>
        </div>
    </section>

    <CompanyHashRouter Company="company"/>
    @* <ScrollActiveSection /> *@
   
}
else{
       <section class="light-background">
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="col-md-9">
                    <p><i class="fas fa-spin fa-spinner mr-4"></i> Loading company profile...</p>
                </div>
            </div>
            
        </div>
    </section>
}
@code {
  
    [Parameter]
    public string id { get; set; }

    private Company? company;

    protected override async Task OnInitializedAsync()
    {
        company = await CompanyService.GetCompanyBySlugAsync(id);
    }


    [Parameter]
    public Company CompanyData { get; set; } = new Company
        {
            Name = "ZAPTA Technologies",
            Location = "Lahore",
            Country = "Pakistan",
            TeamSize = "50-249",
            HourlyRate = "$$$$",
            Description = @"ZAPTA Technologies is a software design and development company also known for its customized and innovative solutions. ZAPTA is the apex of innovation, using only the most skilled individuals and cutting-edge technology to give our clients targeted, high-quality, customized solutions. We work with small to mid-size businesses, enterprises, and funded start-ups. We collaborate with organizations to build MVPs to full-scale products, and also provide dedicated teams. Customer satisfaction is the company's first concern, and it is founded on cooperation and a love for creation.",
        //     Services = new List<string>
        // {
        //     "Custom Software Development",
        //     "Web Development",
        //     "Mobile App Development",
        //     "UX/UI Design",
        //     "Staff Augmentation/Dedicated Teams",
        //     "Software Consultation"
        // },
            IsVerified = true
        };

    [Parameter]
    public string FoundingYear { get; set; } = "2020"; // Kept separate as not in Company model

    [Parameter]
    public List<PartnerBenefit> PartnerBenefits { get; set; } = new List<PartnerBenefit>
    {
        new PartnerBenefit
        {
            Title = "Working With Top Talent Always Pays Off",
            Description = "We hire the top 5% of talent and train in the latest programming languages, tools, and technologies. Yes, we have a dedicated in-house team, ready to take your project to the next level."
        },
        new PartnerBenefit
        {
            Title = "Well Organized Teams & Structured Processes",
            Description = "Customer satisfaction is our first priority, and we back this with our well-organized and experienced teams along with structured software development processes."
        },
        new PartnerBenefit
        {
            Title = "Quality and Excellence",
            Description = "We take the responsibility to document, design, develop, deploy, maintain, modify and collaborate for years with quality and excellence."
        },
        new PartnerBenefit
        {
            Title = "Dedicated Support after Development",
            Description = "After successful deployment, we train your team and provide you with a dedicated support team to assist you along the way."
        }
    };

    [Parameter]
    public string CallToActionText { get; set; } = "If you have an idea, ongoing or existing system, contact us today and we would love to be your trusted software development partner.";

    [Parameter]
    public string AccordionTitle { get; set; } = "ZAPTA Technologies at a Glance";

    [Parameter]
    public List<AccordionItem> AccordionItems { get; set; } = new List<AccordionItem>
    {
        new AccordionItem { Question = "Who Founded ZAPTA Technologies?", Answer = "ZAPTA Technologies was founded by a team of experienced software professionals dedicated to innovation." },
        new AccordionItem { Question = "How many projects a year does ZAPTA Technologies deliver?", Answer = "We deliver dozens of projects annually, ranging from small-scale applications to large enterprise solutions." },
        new AccordionItem { Question = "What is ZAPTA Technologies average cost per project?", Answer = "Project costs vary widely depending on scope and complexity. Please contact us for a custom quote." },
        new AccordionItem { Question = "What are ZAPTA Technologies company values?", Answer = "Our core values include innovation, quality, customer satisfaction, and continuous learning." }
    };

    // Helper classes for dynamic data
    public class PartnerBenefit
    {
        public string Title { get; set; }
        public string Description { get; set; }
    }

    public class AccordionItem
    {
        public string Question { get; set; }
        public string Answer { get; set; }
        public bool IsExpanded { get; set; } = false;
    }

    private void ToggleAccordion(AccordionItem item)
    {
        item.IsExpanded = !item.IsExpanded;
    }
}

<style>
     
</style>

